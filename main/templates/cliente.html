{% load static %}
<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <title>Cliente: {{cliente.nome}}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .botao {
      background-color: lightblue;
      transition: background-color 0.2s ease;
      text-decoration: none;
      color: black;
    }

    .botao:hover {
      background-color: lightgreen;
    }
  </style>
</head>

<body>
  <div class="row">
    <div class="col-2 bg-dark text-white d-flex flex-column p-2">
      <div>
        <h5 class="mb-4">Menu</h5>
        <div class="d-grid gap-2">
          <a href="{% url clientes_update cliente.pk %}" class="btn btn-outline-light">Resumo</a>
          <a class="btn btn-outline-light">Alterar Cadastro</a>
          <a class="btn btn-outline-light">Emitir Certificado</a>
          <a class="btn btn-outline-light">Incluir Sinistro</a>
          <a class="btn btn-outline-light">Incluir Apólice</a>
          <a class="btn btn-outline-light">Excluir Cliente</a>
          <a class="btn btn-outline-light">Voltar</a>
        </div>
      </div>

    </div>

    <div class="col-10">
      
        <div class="d-flex mt-2 align-items-center">
          <h4 class="me-3">Cliente: {{cliente.nome}}</h4>


        
        
      </div>
      <div class="d-flex flex-column mt-3 px-3">
        <span class="fs-5">Resumo:</span>
        <table class="table table-bordered text-center align-middle">
          <thead class="table-light">
            <tr>
              <th rowspan="2">Apólice</th>
              <th colspan="2">Principal</th>
              <th colspan="2">Cônjuge</th>
              <th rowspan="2">Diagnóstico</th>
              <th rowspan="2">Aux. Baba</th>
            </tr>
            <tr>
              
              <th>Prêmio</th>
              <th>IS Básica</th>
              <th>Prêmio</th>
              <th>IS Básica</th>
            </tr>
          </thead>
          <tbody>
            {% for tipo, info in apolices.items %}
            {# só entra no loop interno se existir ao menos 1 apólice #}
            {% if info.tem %}
            {% for ap in info.apol %}
            <tr>
              {%if tipo == "Decesso"%}
              <td>Decesso</td>
              {% else %}
              <td>{{tipo}} - {{ap.apolice.nome}}</td>
              {%endif%}
              <td>R$ {{ap.premio|floatformat:2|default:"0,00"}}</td>
              <td>R$ {{ap.isbasica|floatformat:2|default:"0,00"}}</td>
              <td>R$ {{ap.premioconjuge|floatformat:2|default:"0,00"}}</td>
              <td>R$ {{ap.isbasicaconjuge|floatformat:2|default:"0,00"}}</td>
              <td>R$ {{ap.diagnostico|floatformat:2|default:"0,00"}}</td>
              <td>R$ {{ap.auxbaba|floatformat:2|default:"0,00"}}</td>
            </tr>
            {%endfor%}
            {%endif%}
            {%endfor%}
          </tbody>
        </table>

        <!-- Total -->
        <div class="d-flex align-items-center my-4">
          <strong class="me-2">TOTAL :</strong>
          <div class="border px-3 py-1">R$ {{premio|floatformat:2|default:"0,00"}}</div>
        </div>

        <!-- Somatórios -->
        <div class="mb-2">
          <strong>Soma das IS's básicas VIDA:</strong> R$ {{isTotal|floatformat:2|default:"0,00"}}
        </div>
        <div>
          <strong>Soma das IS's básicas VIDA (conj.):</strong> R$ {{isConj|floatformat:2|default:"0,00"}}
        </div>
      </div>

      <!-- <form method="post" novalidate>
            {% csrf_token %}
            <div class="row">
                {% for field in form %}
                    <div class="mb-1 col-md-3">
                        {% if field.field.widget.input_type == 'checkbox' %}
                             <label class="form-check-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
                             {{ field }}
                        {% else %}
                        <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
                        {{ field }}
                        {% endif %}
                        {% if field.help_text %}
                            <div class="form-text">{{ field.help_text }}</div>
                        {% endif %}
                        {% if field.errors %}
                            <div class="text-danger small">
                                {{ field.errors|striptags }}
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>

            <button type="submit" class="btn btn-primary">Salvar</button>
        </form> -->
      <a class="btn btn-warning my-3" href="{% url 'principal' %}">Voltar</a>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>